<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WalletConnect Demo</title>
</head>
<body>
  <h1>WalletConnect Demo</h1>
  <button id="connectBtn">Connect Wallet</button>
  <p id="status">Status: Not connected</p>
  <p id="account"></p>

  <!-- Load React + ReactDOM (needed for wagmi/web3modal) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Load wagmi + viem + web3modal -->
  <script src="https://unpkg.com/viem@2.9.3/dist/viem.min.js"></script>
  <script src="https://unpkg.com/wagmi@2.13.0/dist/wagmi.min.js"></script>
  <script src="https://unpkg.com/@web3modal/wagmi@4.2.3/dist/index.umd.js"></script>

  <div id="app"></div>

  <script type="text/javascript">
    const { createWeb3Modal } = window.Web3ModalWagmi;
    const { configureChains, createConfig, WagmiConfig } = window.wagmi;
    const { mainnet } = window.wagmi.chains;
    const { jsonRpcProvider } = window.wagmi.providers;

    // Replace with your WalletConnect ProjectId
    const projectId = "685604db11bce85e357332363ed2a81f";

    // 1. Configure chains + provider
    const config = window.wagmi.createConfig({
      autoConnect: true,
      connectors: window.Web3ModalWagmi.defaultWagmiConnectors({ chains: [mainnet], projectId }),
      publicClient: window.viem.createPublicClient({ chain: mainnet, transport: window.viem.http() })
    });

    // 2. Create modal
    const modal = createWeb3Modal({
      wagmiConfig: config,
      projectId,
      chains: [mainnet],
      defaultChain: mainnet
    });

    // 3. Hook up button
    const btn = document.getElementById("connectBtn");
    const status = document.getElementById("status");
    const account = document.getElementById("account");

    btn.addEventListener("click", async () => {
      try {
        await modal.open();
        const [address] = await config.publicClient.request({ method: "eth_requestAccounts" });
        status.textContent = "✅ Connected";
        account.textContent = "Account: " + address;
      } catch (err) {
        console.error(err);
        status.textContent = "❌ " + err.message;
      }
    });
  </script>
</body>
</html>
