<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WalletConnect Modal Test</title>
</head>
<body>
  <button id="connectBtn">Connect Wallet</button>

  <!-- Load WalletConnect Modal -->
  <script src="https://unpkg.com/@walletconnect/modal@2.6.2/dist/index.umd.js"></script>
  <script>
    const projectId = "685604db11bce85e357332363ed2a81f";

    // ✅ Correct way: Use WalletConnectModalSign
    const modal = new window.WalletConnectModalSign.WalletConnectModalSign({
      projectId: projectId,
      metadata: {
        name: "My Dapp",
        description: "Demo dapp with WalletConnect",
        url: "https://your-dapp-url.com",
        icons: ["https://walletconnect.com/walletconnect-logo.png"],
      },
    });

    document.getElementById("connectBtn").addEventListener("click", async () => {
      try {
        const session = await modal.connect({
          requiredNamespaces: {
            eip155: {
              methods: ["eth_sendTransaction", "personal_sign", "eth_signTypedData"],
              chains: ["eip155:1"],
              events: ["accountsChanged", "chainChanged"],
            },
          },
        });

        console.log("✅ Connected:", session);
        alert("Wallet connected!");
      } catch (err) {
        console.error("❌ Connection error:", err);
        alert("Wallet not found or connection rejected");
      }
    });
  </script>
</body>
</html>
